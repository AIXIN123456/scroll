(function(){var a={isok:function(c){if(!Array.prototype.forEach){console.log("你的浏览器太老旧了");return false}c&&c()},support:function(c,d){if(typeof module=="object"&&typeof exports=="object"){module.exports=d}else{if(typeof define=="function"&&define.amd){define(function(){return d})}else{window[c]=d}}},addEvent:function(e,d,c){e.addEventListener(d,c,false)},removeEvent:function(e,d,c){e.removeEventListener(d,c,false)},extend:function(c,f){for(var e in f){c[e]=f[e]}return c},requestAnimationFrame:function(){return window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}(),css:function(d,e){var c;if(typeof e=="string"){d=d.length>1?d[0]:d;c=window.getComputedStyle(d,null);return c[e]?(c[e].indexOf("px")!=-1?parseInt(c[e].replace("px","")):c[e]):""}if(typeof e=="object"){if(d&&d.length>1){Array.prototype.forEach.call(d,function(g){for(var h in e){g.style[h]=e[h]}})}else{for(var f in e){if(d&&d.style){d.style[f]=e[f]}}}}}};a.isok(b);function b(){var d=document;var c=function(f,e){return this.__init(f,e||{})};c.prototype={__init:function(f,e){this.elem=typeof f=="string"?document.getElementById(f):f;if(!this.elem){console.log("请传入id");return false}this.ops=a.extend({step:20,scroll:null,start:null,end:null},e);this.moveing=false;this.mouseover=false;this.openScroll=true;this.userOpenScroll=true;this.scrollTop=null;this.__createLayou();this.update();this.__bindEvent();return this},__createLayou:function(){a.css(this.elem,{position:"relative",overflow:"hidden"});var f=this.elem.innerHTML;var e='<div class="__wlzScroll" id="__wlzScroll">'+f+'</div><div class="__wlzScroll_bar __wlzScroll_bar_h" id="__wlzScroll_bar_h"><div class="__wlzScroll_bar_thumb" id="__wlzScroll_bar_thumb_h"></div></div><div class="__wlzScroll_bar __wlzScroll_bar_v" id="__wlzScroll_bar_v"><div class="__wlzScroll_bar_thumb" id="__wlzScroll_bar_thumb_v"></div></div>';this.elem.innerHTML=e},__getParams:function(){this.con=this.elem.querySelector("#__wlzScroll");this.barH=this.elem.querySelector("#__wlzScroll_bar_h");this.barHB=this.elem.querySelector("#__wlzScroll_bar_thumb_h");this.barV=this.elem.querySelector("#__wlzScroll_bar_v");this.barVB=this.elem.querySelector("#__wlzScroll_bar_thumb_v");this.bars=this.elem.querySelectorAll(".__wlzScroll_bar");this.barItems=this.elem.querySelectorAll(".__wlzScroll_bar_thumb");this.boxScrollH=this.con.scrollHeight;this.boxScrollW=this.con.scrollWidth;this.boxMaxH=this.elem.offsetHeight;this.boxMaxW=this.elem.offsetWidth;this.distScrollH=this.boxScrollH-this.boxMaxH;this.distScrollW=this.boxScrollW-this.boxMaxW;this.boxMaxH/this.boxScrollH*100;this.heightV=this.boxMaxH/this.boxScrollH*100;this.heightH=this.boxMaxW/this.boxScrollW*100},__ScrollMove:function(f,e){var g=this.getDistance(e);this.__scrollTo(g+f,e)},__slideWheelUp:function(e){this.__ScrollMove(this.ops.step,e)},__slideWheelDown:function(e){this.__ScrollMove(-this.ops.step,e)},__linear:function(f,e,h,g){return h*f/g+e},__getDuration:function(e){return Math.ceil(e/17)},__isH:function(){return this.boxScrollW>this.boxMaxW},__isV:function(){return this.boxScrollH>this.boxMaxH},__barsHide:function(){(!this.moveing&&!this.mouseover)&&a.css(this.bars,{opacity:0})},__bindEvent:function(){var f=this;a.addEvent(this.elem,"mouseover",function(){if(!f.openScroll){return false}f.mouseover=true;a.css(f.bars,{opacity:1})});a.addEvent(this.elem,"mouseleave",function(){if(!f.openScroll){return false}f.mouseover=false;f.__barsHide.call(f);document.onkeyup=null});var e;if(navigator.userAgent.indexOf("Firefox")!=-1){a.addEvent(this.elem,"DOMMouseScroll",function(g){if(!f.openScroll){return false}g.preventDefault();e=f.__isV()?"v":"h";g.detail>0?f.__slideWheelDown.call(f,e):f.__slideWheelUp.call(f,e)})}else{a.addEvent(this.elem,"mousewheel",function(g){if(!f.openScroll){return false}g.preventDefault();e=f.__isV()?"v":"h";g.wheelDelta<0?f.__slideWheelDown.call(f,e):f.__slideWheelUp.call(f,e)})}if(this.bars&&this.bars.length){Array.prototype.forEach.call(this.bars,function(h){var g=h.querySelector(".__wlzScroll_bar_thumb");a.addEvent(g,"click",function(i){i.stopPropagation()});a.addEvent(h,"click",function(n){if(!f.openScroll){return false}var m=n.offsetY,l=n.offsetX;var i=this.querySelector(".__wlzScroll_bar_thumb");var k,j;if(i.id=="__wlzScroll_bar_thumb_v"){j="v";k=m>i.offsetTop+i.offsetHeight?true:false}else{j="h";k=l>i.offsetLeft+i.offsetWidth?true:false}k?f.__slideWheelDown.call(f,j):f.__slideWheelUp.call(f,j)});h.onmousedown=function(k){if(!f.openScroll){return false}k.preventDefault();var p=k.clientX,o=k.clientY;var i=k.target||k.currentTarget||k.srcElement;var n=i.id=="__wlzScroll_bar_thumb_v";var m=n?i.offsetHeight:i.offsetWidth;var j=n?"v":"h";var l=f.getDistance(j);document.onmousemove=function(u){u.preventDefault();f.moveing=true;var w=u.clientX,t=u.clientY;var r=w-p,q=t-o;var v,s;if(n){v=q/(f.boxMaxH-m);s=((f.boxScrollH-f.boxMaxH)*v)-l}else{v=r/(f.boxMaxW-m);s=((f.boxScrollW-f.boxMaxW)*v)-l}f.__scrollTo(-s,j)};document.onmouseup=function(){f.moveing=false;document.onmousemove=null;document.onmouseup=null;f.__barsHide.call(f)}}})}},__scrollTo:function(j,n){if(j==undefined){return false}var i=this,h,k,l,g,m;var e={},f={};var o={move:function(p){this.cb(p);e[g]=j+"px";a.css(i.con,e);f[l]=h+"%";a.css(k,f)},h:function(){l="left";g="marginLeft";m=i.distScrollW;k=i.barHB;j=j>=0?0:Math.abs(j)>i.distScrollW?-i.distScrollW:j;h=(Math.abs(j)+i.boxMaxW)/i.boxScrollW*100-i.heightH;this.move("h")},v:function(){l="top";g="marginTop";m=i.distScrollH;k=i.barVB;j=j>=0?0:Math.abs(j)>i.distScrollH?-i.distScrollH:j;h=(Math.abs(j)+i.boxMaxH)/i.boxScrollH*100-i.heightV;this.move("v")},cb:function(q){var p=Math.ceil(Math.abs(j));if(p!=i.scrollTop){if(p==0&&typeof i.ops.start=="function"){i.ops.start(q)}else{if(p>=m&&typeof i.ops.end=="function"){i.ops.end(q)}else{if(typeof i.ops.scroll=="function"){i.ops.scroll(p,q)}}}}i.scrollTop=p}};if(n){if(n=="v"){o.v()}if(n=="h"){o.h()}}else{if(this.__isV()){o.v()}else{o.h()}}o=null},scrollTo:function(g,h){var i=this.getDistance(h);if(typeof g=="number"){g=Math.abs(i)>=g?i-(i+g):i-(g+i);this.__scrollTo(g,h)}else{var e=this.getDistance("v");var f=this.getDistance("h");if(!this.__isV()){this.__scrollTo(0,"v")}else{if(!this.__isH()){this.__scrollTo(0,"h")}}}},scrollToStart:function(e){this.scrollTo(0,e)},scrollToEnd:function(e){this.scrollTo(this.__isV()?this.distScrollH:this.distScrollW,e)},getScroll:function(){return this.con},getDistance:function(f){var e;if(f){e=f=="v"?"marginTop":"marginLeft"}else{e=this.__isV()?"marginTop":"marginLeft"}return a.css(this.con,e)},update:function(){this.__getParams();if(!this.userOpenScroll){return false}if(this.openScroll){if(!this.__isV()&&!this.__isH()){this.disabled(true)}else{if(this.__isV()){a.css(this.barVB,{height:this.heightV+"%",display:"block"})}else{a.css(this.barVB,{display:"none"})}if(this.__isH()){a.css(this.barHB,{width:this.heightH+"%",display:"block"})}else{a.css(this.barHB,{display:"none"})}}this.scrollTo()}else{if(this.userOpenScroll){if(this.__isV()||this.__isH()){this.enabled(true)}}}},restore:function(){this.scrollToStart("v");this.scrollToStart("h");this.update()},enabled:function(e){this.openScroll=true;if(e!=true){this.userOpenScroll=true}a.css(this.bars,{display:"block"});this.update()},disabled:function(e){this.openScroll=false;if(e!=true){this.userOpenScroll=false}a.css(this.barVB,{height:0+"%"});a.css(this.barHB,{width:0+"%"});a.css(this.bars,{display:"none"});this.update()}};a.support("WlzScroll",c)}})();